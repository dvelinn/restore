Fedora restore from backup

Start in ~
Grab backup file from NAS and stick it in ~/Downloads

Untar into home dir
tar --strip-components=1 -xzf " backup file " -C "./"

Enble copr repos for QoL stuff
sudo dnf copr enable monkeygold/nautilus-open-any-terminal -y
sudo dnf copr enable sneexy/zen-browser -y

Ditch Fedora Flathub and use the real thing
sudo flatpak remote-delete flathub
sudo remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo

Install 1Password
sudo rpm --import https://downloads.1password.com/linux/keys/1password.asc
sudo sh -c 'echo -e "[1password]\nname=1Password Stable Channel\nbaseurl=https://downloads.1password.com/linux/rpm/stable/\$basearch\nenabled=1\ngpgcheck=1\nrepo_gpgcheck=1\ngpgkey=\"https://downloads.1password.com/linux/keys/1password.asc\"" > /etc/yum.repos.d/1password.repo'
sudo dnf install -y 1password

Install Mullvad
sudo dnf config-manager addrepo --from-repofile=https://repository.mullvad.net/rpm/stable/mullvad.repo
sudo dnf install -y mullvad-vpn

Install usual packages
sudo dnf install -y $(< ~/.pkglist.txt)

Create a little script to install flatpaks
FLATPAKLIST_FILE="${HOME}/.flatpaklist.txt"
if [[ -f "${FLATPAKLIST_FILE}" ]]; then
  echo ":: Installing Flatpaks from ${FLATPAKLIST_FILE}..."
  while read -r app; do
    [[ "$app" =~ ^# ]] && continue
    [[ -z "$app" ]] && continue
    sudo flatpak install -y flathub "$app" || error ":: Failed: $app"
  done < "${FLATPAKLIST_FILE}"
  echo ":: Flatpak installs complete"
else
  echo ":: Flatpak list ${FLATPAKLIST_FILE} not found; skipping"
fi

Make sure tuigreet is installed
sudo dnf install -y tuigreet

Set our tuigreet config
sudo rm /etc/greetd/config.toml
sudo rm /etc/vconsole.conf
sudo cp ~/Documents/Scripts/greetd/fd-config.toml /etc/greetd/config.toml
sudo cp ~/Documents/Scripts/greetd/vtrgb /etc/vtrgb
sudo cp ~/Documents/Scripts/greetd/vconsole.conf /etc/vconsole.conf

Create an override so we can change terminal colors before tuigreet loads
sudo systemctl edit greetd
Add:
[Service]
ExecStartPre=/usr/bin/setvtrgb /etc/vtrgb

Set up the service
sudo systemctl daemon-reload
sudo systemctl disable display-manager
sudo systemctl enable greetd

Create the NAS sync drive
mkdir -p Mjolnir

Enable 1P with Zen
sudo mkdir /etc/1password
sudo touch /etc/1password/custom_allowed_browsers
sudo echo "zen-bin" | sudo tee -a /etc/1password/custom_allowed_browsers

Set kitty for "Open Here" in nautilus
gsettings set com.github.stunkymonkey.nautilus-open-any-terminal terminal kitty
